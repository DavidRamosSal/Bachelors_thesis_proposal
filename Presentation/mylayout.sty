%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                    							
%% 	LaTeX Style File for typesetting TEI-Pel thesis presentations
%% 	Created by John Liaperdos, October 2014 - April 2015 
%%	[ioannis.liaperdos@gmail.com]
%%   
%%  version 1.1
%%
%%  Last update: 26/04/2015
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Disclaimer: Use at your own risk

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{mylayout}[2019/01/03 mylayout]

\usepackage{xstring}
\usepackage{calculator}
\usepackage[font=footnotesize]{caption}
\usepackage{subcaption}
\captionsetup[figure]{labelformat=empty}
\usepackage{wrapfig}
\usepackage{adjustbox}


%\edef\logoeps{teikal_logo.eps}
\edef\logopng{Logo_U.png}

\makeatletter
\def\insertminiframescurrentsection{%
  \def\sectionentry##1##2##3##4##5{}
  \def\slideentry##1##2##3##4##5##6{%
    %section number, subsection number, slide number, first/last frame, page number, part number
    \ifnum##6=\c@part\ifnum##1=\c@section\ifnum##2>0\ifnum##3>0%
      \advance\beamer@xpos by1\relax%
    \hbox to 0pt{%
      \beamer@tempdim=-\beamer@vboxoffset%
      \advance\beamer@tempdim by-\beamer@boxsize%
      \multiply\beamer@tempdim by\beamer@ypos%
      \raise\beamer@tempdim\hbox{%
        \beamer@tempdim=\beamer@boxsize%
        \multiply\beamer@tempdim by\beamer@xpos%
        \advance\beamer@tempdim by -\beamer@boxsize%
        \advance\beamer@tempdim by 1pt%
        \kern\beamer@tempdim
        \global\beamer@section@min@dim\beamer@tempdim
        \hbox{\beamer@link(##4){%
            \usebeamerfont{mini frame}%
            \ifnum\c@section=##1%
              \ifnum\c@subsection=##2%
                \usebeamercolor[fg]{mini frame}%
                \ifnum\c@subsectionslide=##3%
                  \usebeamertemplate{mini frame}%\beamer@minislidehilight%
                \else%
                  \usebeamertemplate{mini frame in current subsection}%\beamer@minisliderowhilight%
                \fi%
              \else%
                \usebeamercolor{mini frame}%
                %\color{fg!50!bg}%
                \usebeamertemplate{mini frame in other subsection}%\beamer@minislide%
              \fi%
            \else%
              \usebeamercolor{mini frame}%
              %\color{fg!50!bg}%
              \usebeamertemplate{mini frame in other subsection}%\beamer@minislide%
            \fi%
          }}}\hskip-10cm plus 1fil%
    }\fi\fi\fi%
   \ignorespaces
    }
  \vbox{{%
    \usebeamerfont{section in head/foot}\usebeamercolor[fg]{section in head/foot}%
    \beamer@xpos=0\relax%
    \beamer@ypos=0\relax%
    \hbox{\setbox\beamer@sectionbox=\hbox{\kern1sp}%
      \ht\beamer@sectionbox=1.875ex%
      \dp\beamer@sectionbox=0.75ex%
        \hskip-1.875ex plus-1fill%
        \global\beamer@section@min@dim\z@
        \dohead%
        \beamer@section@set@min@width
      \box\beamer@sectionbox\hfil\hskip.3cm}%
  }}}

\newcommand{\setTeipelLayout}[1]{
	% choose Beamer theme
	
		\usetheme{Antibes}
		\useoutertheme[subsection=false]{miniframes}
		\setbeamertemplate{navigation symbols}{}
		
		%\usetheme{Warsaw} %<-- well known blue theme
		%\usetheme{default}\usecolortheme{beaver}%\useoutertheme{default}
		%\usetheme{PaloAlto}
		%\usetheme{Warsaw}
		%\usetheme{Berlin}
		%\usecolortheme{seahorse}
		%\usecolortheme{rose}
		%\usetheme{Berkeley}
		%\usetheme{boxes}
		%\usetheme{Bergen}
		%\usetheme{CambridgeUS} 
		%\usetheme{Copenhagen}
		%\usetheme{Darmstadt}
		%\usetheme{Dresden}
		%\usetheme{Frankfurt}
		%\usetheme{Goettingen} 
		%\usetheme{Hannover}
		%\usetheme{Ilmenau}
		%\usetheme{JuanLesPins}
		%\usetheme{Luebeck}
		%\usetheme{Madrid}
		%\usetheme{Malmoe}
		%\usetheme{Marburg} 
		%\usetheme{Montpellier}
		%\usetheme{Pittsburgh}
		%\usetheme{Rochester}
		%\usetheme{Singapore} 
		%\usetheme{Szeged}
		%\usetheme{Boadilla}
		%\usetheme{AnnArbor}
		
		
    % Use new logo (and colors)
    \IfSubStr{#1}{newlogo}%
    	{%
        	\definecolor{mycolor}{RGB}{96, 34, 59}
           %\edef\logoeps{teipel_new_logo.eps}
			\edef\logopng{Logo_U.png}
        }%
        {%
        	\definecolor{mycolor}{RGB}{96, 34, 59}
			%\edef\logoeps{teikal_logo.eps}
			%\edef\logopng{logo_U.png}            
        }        
	% set colors
		
		\setbeamercolor{alerted text}{fg=red}
		\setbeamercolor{background canvas}{bg=mycolor!4}
		\setbeamercolor{block body alerted}{bg=white, fg=red}
		\setbeamercolor{block body}{bg=orange!40}
		\setbeamercolor{block body example}{fg=mycolor!60!black, bg=gray!30}
		\setbeamercolor{block title alerted}{fg=white, bg=red}
		\setbeamercolor{block title}{bg=mycolor}
		\setbeamercolor{block title example}{bg=mycolor!70!black,fg=white}
		\setbeamercolor{fine separation line}{}
		\setbeamercolor{frametitle}{fg=white}
		\setbeamercolor{item projected}{fg=white}
		\setbeamercolor{normal text}{bg=mycolor!60,fg=mycolor!60!black}
		\setbeamercolor{palette sidebar primary}{use=normal text,fg=normal text.fg}
		\setbeamercolor{palette sidebar quaternary}{use=structure,fg=structure.fg}
		\setbeamercolor{palette sidebar secondary}{use=structure,fg=structure.fg}
		\setbeamercolor{palette sidebar tertiary}{use=normal text,fg=normal text.fg}
		\setbeamercolor{section in sidebar}{fg=brown}
		\setbeamercolor{section in sidebar shaded}{fg=gray}
		\setbeamercolor{section in toc}{fg=normal text.fg, bg=normal text.bg}
		\setbeamercolor{separation line}{}
		\setbeamercolor{sidebar}{bg=red}
		\setbeamercolor{sidebar}{parent=palette primary}
		\setbeamercolor{structure}{bg=mycolor, fg=mycolor}
		\setbeamercolor{subsection in sidebar}{fg=brown}
		\setbeamercolor{subsection in sidebar shaded}{fg=gray}
		\setbeamercolor{subsection in toc}{fg=normal text.fg, bg=normal text.bg}
		\setbeamercolor{title}{fg=white}
		\setbeamercolor{titlelike}{fg=brown}
		\setbeamercolor{itemize item}{fg=mycolor}
		%\setbeamercolor*{bibliography entry title}{fg=black}
		%\setbeamercolor*{bibliography entry author}{fg=black}
		\setbeamercolor*{bibliography entry location}{fg=mycolor}
		\setbeamercolor*{bibliography entry note}{fg=black}
	% remove beamer's navigation bar	
		\setbeamertemplate{navigation symbols}{}		
	% Comment to completely cover next transparencies %%
		\setbeamercovered{transparent=30}
	% Table of contents before each Section
		\AtBeginSubsection[]{
		  \frame<beamer>{ 
		    \frametitle{Contenido}   
		    \tableofcontents[currentsection,currentsubsection] 
		  }
		}
    % Add draft watermark
    \IfSubStr{#1}{draft}%
    	{%
        	\usepackage{tikz}%
    		\setbeamertemplate{background}{%
            	\begin{tikzpicture}[remember picture, overlay]
        			\node[rotate=90, anchor=west, xshift=45pt, yshift=-10pt] at (current page.south west){\textcolor{gray!60}{\emph{}}};%
            	\end{tikzpicture}%
            }%
        }{}

        %------------------------------------------------------

  
  
  \setbeamertemplate{headline}
{
  %\pgfuseshading{beamer@barshade}\vskip-5ex% Remove this line if you don't want a shadow below the headline
  \leavevmode%
  \hbox{%
  \begin{beamercolorbox}[wd=\paperwidth,ht=2.65ex,dp=1.5ex,left]{section in head/foot}%
    \usebeamerfont{section in head/foot}\hspace*{3ex}\insertsectionhead
  \end{beamercolorbox}%
 % \begin{beamercolorbox}[wd=.5\paperwidth,ht=2.65ex,dp=1.5ex,left]{subsection in head/foot}%
%    \usebeamerfont{subsection in head/foot}\hspace*{2ex}\insertminiframescurrentsection
%  \end{beamercolorbox}
}%
  \vskip0pt%
}

%-----------------------------------------------------
}

\newcommand{\supervisor}[3]{
	\subtitle{Propuesta trabajo de grado}
	\logo{\begin{tabular}{c}  \color{mycolor}\scalebox{1.7}{\insertframenumber/\inserttotalframenumber} \end{tabular}}
	\institute{ Escuela de FÃ­sica\\Facultad de Ciencias \\ Universidad Industrial de Santander\\[10pt] \scalebox{1}{#1: #2}}
}





\newcommand{\typesetFrontSlides}{
	\begin{frame}[plain,noframenumbering]
	\date{}
	  \titlepage
	\end{frame}
	\begin{frame}[plain,noframenumbering]{Contenido}
	  \tableofcontents
	\end{frame}
}


% format multiple author names in title page
\makeatletter
	\long\def\beamer@author[#1]#2{%
  	\def\insertauthor{\def\inst{\beamer@insttitle}%
    \def\and{\beamer@andtitle}%
	\noexpandarg\StrCount{#2}{\and}[\numberofauthorsminusone]%
	\ADD{1}{\numberofauthorsminusone}{\numberofauthors}%
	\DIVIDE{1}{\numberofauthors}{\columnwidthfactor}%
	\renewcommand\and{\column{\columnwidthfactor\textwidth}\centering}%
	\begin{columns}[t,onlytextwidth]%
		\column{\columnwidthfactor\textwidth}\centering%
		#2%
	\end{columns}%
    }%
  	\def\beamer@shortauthor{#1}%
  	\ifbeamer@autopdfinfo%
    	\def\beamer@andstripped{}%
    	\beamer@stripands#1 \and\relax
    	{\let\inst=\@gobble\let\thanks=\@gobble%
        \def\and{, }\hypersetup{pdfauthor={\beamer@andstripped}}}
  	\fi%
}
\makeatother



\endinput